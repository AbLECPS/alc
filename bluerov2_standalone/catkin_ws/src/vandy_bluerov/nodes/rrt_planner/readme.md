## RRT* Planner

### Files:
| File | Purpose |
| :------------ | :--------------- |
| nodes/rrt_hsd_publisher.py | Publishs the HSD command to the robot for following our the path generated by our RRT Planner |
| nodes/rrt_plannder.py | Creates a path using the RRT* algorithm from the robot position to a targeted waypoint |
| launch/rrt_planner.launch | Launches our planner and command nodes |
### Files Modified:
| File | Purpose |
| :------------ | :--------------- |
| scripts/bluerov_launch.sh | Changed to generate random obstacles and use our planner not the current one. |
| Some behavior tree files | Disabled other parts where it moves the robot so our planner does all the movement |
| launch/start_bluerov_uuv.launch | Modified to include launching the rrt components |
| mission_04.yaml | Changed to make the mission a bit harder (longer movements between target waypoints) |

### To Run
1. **First start running a roscore:**
```
cd $ALC_HOME/bluerov2_standalone/catkin_ws
source run_roscore.sh
```

2. **Start a docker container:**
```
cd $ALC_HOME/bluerov2_standalone/catkin_ws
source run_bluerov_sim.sh
```
Note: If a docker container is already running (the last section errored), use this command to get access in the terminal to that docker container `docker exec -it bluerov_sim bash`

3. **Outside of the docker system, start up rviz:**
```
cd $ALC_HOME/bluerov2_standalone/catkin_ws
source ros_noetic_setup_gazebo_ros_connection.sh
```
Note: choose correct ros distribution in the second line.

4. **Run the simulation:**
```
source run_xvfb.sh
source src/vandy_bluerov/scripts/bluerov_launch.sh
```
Note: You only need to run the first line once, and you can choose different simulation situations from the scripts folder.
Note: If you want to run the RRT Planner in a serparate window (for easier viewing of prints), get the docker container in another window using `docker exec -it bluerov_sim bash` then run `roslaunch vandy_bluerov rrt_planner.launch`.

5. (if wanted) **Get access to the topic of ROS:**
```
. ${ALC_HOME}/bluerov2_standalone/catkin_ws/devel/setup.bash
. /opt/ros/noetic/setup.bash --extend
. /usr/share/gazebo-11/setup.sh --extend
export ROS_MASTER_URI='http://ros-master:11311'
export GAZEBO_MASTER_URI='http://aa_uuvsim:11345'
export PYTHONPATH='/aa/devel/lib/python2.7/dist-packages':$PYTHONPATH
```
```
rostopic echo /uuv0/hsd_command
rostopic echo /uuv0/target_waypoint
rostopic echo /uuv0/pose_gt_noisy_ned
rostopic echo /uuv0/obstacle_map
rostopic echo /uuv0/rrt_path
rostopic echo /uuv0/rrt_points
```

Planner written by Jackson Rusch and Ao Qu under the direction of Forrest Laine.
